(this["webpackJsonpavalon-client"]=this["webpackJsonpavalon-client"]||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),l=n.n(c),o=n(5),s=n(1),u=(n(16),n(20));var i=function(){var e=Object(a.useState)("lobby"),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),i=Object(s.a)(l,2),m=i[0],d=i[1],f=Object(a.useState)({}),p=Object(s.a)(f,2),h=p[0],v=p[1],b=Object(a.useState)(!1),E=Object(s.a)(b,2),g=E[0],j=E[1],k=Object(a.useState)(""),y=Object(s.a)(k,2),O=y[0],w=y[1],_=Object(a.useState)({round:0,successes:[],fails:[],mission:0,captain:0,skips:0,proposed:!1,approved:!1,proposal:[],votes:[],hypertext:"ReactJS is legendary",assassin_mode:!1,rounds:[0,0,0,0,0],actors:[]}),C=Object(s.a)(_,2),N=C[0],S=C[1],x=Object(a.useState)({i:0,roles:[],vote:"",act:"",assassin:!1,good:!0}),I=Object(s.a)(x,2),P=I[0],R=I[1],A=Object(a.useState)([]),B=Object(s.a)(A,2),M=B[0],V=B[1],W=window.location.pathname.split("/"),q=W[W.length-1].split("-"),F=Object(s.a)(q,2),G=F[0],J=F[1];Object(a.useEffect)((function(){var e=setInterval((function(){fetch("/server/auth/"+G+"/"+J).then((function(e){return e.json()})).then((function(e){return j(e.success)})),fetch("/server/get_mode").then((function(e){return e.json()})).then((function(e){e.success&&c(e.data)})),fetch("/server/lobby/get_players").then((function(e){return e.json()})).then((function(e){e.success&&d(e.data)})),fetch("/server/lobby/get_roles").then((function(e){return e.json()})).then((function(e){e.success&&v(e.data)})),fetch("/server/game/get_game_state/"+G+"/"+J).then((function(e){return e.json()})).then((function(e){e.success&&S(e)})),fetch("/server/game/get_my_state/"+G+"/"+J).then((function(e){return e.json()})).then((function(e){e.success&&R(e)})),fetch("/server/get_kicked").then((function(e){return e.json()})).then((function(e){e.success&&V(e.data)}))}),500);return function(){clearInterval(e)}}));var K=null,L=function(e){fetch("/server/game/vote/"+G+"/"+J+"/"+e)},Q=function(e,t){return Object(o.a)(Array(t)).map((function(t,n){return e[Math.floor(Math.random()*e.length)]})).join("")},T=function(e){return"approve"===e?"\u2705":"disapprove"===e?"\ud83d\uded1":"..."},D=null;switch(n){case"lobby":D=m.map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return function(e){fetch("/server/lobby/kick/"+e)}(e)}},"Kick")),r.a.createElement("td",null,e))}));var H=Object.keys(h).map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return function(e){fetch("/server/lobby/toggle/"+e)}(e)}},h[e]?"disable":"enable")),r.a.createElement("td",{className:h[e]?"activeRole":"inactiveRole"},e))}));K=r.a.createElement("div",null,r.a.createElement("h1",null,"Players"),r.a.createElement("table",null,r.a.createElement("tbody",null,D)),r.a.createElement("h1",null,"Roles"),r.a.createElement("table",null,r.a.createElement("tbody",null,H)),r.a.createElement("button",{onClick:function(){fetch("/server/lobby/start_game").then((function(e){return e.json()})).then((function(e){return w(e.message)}))}},"Start Game!"),r.a.createElement("p",null,O));break;case"game":var X=P.i===N.captain,$=function(e,t){return r.a.createElement("button",{onClick:function(){return function(e){fetch("/server/game/toggle_proposal/"+G+"/"+J+"/"+e)}(e)},className:N.proposal.includes(e)?"active":"inactive"},N.proposal&&N.proposal.includes(e)?"Remove":"Add")};D=m.map((function(e,t){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,X&&!N.proposed?$(e):function(e,t){return r.a.createElement("p",null,N.actors.includes(e)?"Acted":N.proposal.includes(e)?"On team":"")}(e)),r.a.createElement("td",null,[t===P.i?" (me)":"",t===(N.captain+4-N.skips)%m.length?"\ud83d\udd28":"",t===N.captain?"\ud83d\udfe0":""].join("")),r.a.createElement("td",{className:(P.i,"")},e),r.a.createElement("td",null,P.roles[t]),N.votes.length===m.length?function(e,t){return r.a.createElement("td",null,T(N.votes[t]))}(0,t):function(e,t){return r.a.createElement("td",null,t===P.i?T(P.vote):N.votes.includes(e)?"Voted\ud83d\udce8":"...")}(e,t))}));var z=r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){fetch("/server/game/propose_team/"+G+"/"+J).then((function(e){return e.json()})).then((function(e){return w(e.message)}))}},"Propose the team")),U=r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return L("approve")},className:"approve"===P.vote?"active":"inactive"},"Approve"),r.a.createElement("button",{onClick:function(){return L("disapprove")},className:"disapprove"===P.vote?"active":"inactive"},"Reject")),Y=P.good?null:r.a.createElement("button",{onClick:function(){return fetch("/server/game/act/"+G+"/"+J+"/fail")},className:"fail"},"Fail"),Z=r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return fetch("/server/game/act/"+G+"/"+J+"/success")},className:"succeed"},"Succeed"),Y);K=r.a.createElement("div",null,r.a.createElement("p",null,[0,1,2,3,4].map((function(e){return function(e){return(N.successes.includes(e)?"W":N.fails.includes(e)?"L":"_")+" "}(e)}))),r.a.createElement("p",null,"Players required per mission (.1 = 2 fails needed): ",[0,1,2,3,4].map((function(e){return function(e){return N.rounds[e]+", "}(e)}))),r.a.createElement("p",null,"Rejected teams: ",N.skips),r.a.createElement("h1",null,"Players"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,D)),N.assassin_mode?"":N.approved?N.proposal.includes(G)&&""===P.act?Z:"It's time for a vote!":N.proposed?U:X?z:"",r.a.createElement("p",null,O))}if(!g){var ee=Q(["king","queen","duke","jester","squire","knight"],1)+" of "+Q(Object(o.a)("1234567890"),2)+" "+Q(["clubs","spades","hearts","clovers","diamonds","dollars","realms"]),te=Q(["gradient","hessian","jacobian","sigmoid","relu","tanh"],1)+Q(Object(o.a)("1234567890"),3);K=r.a.createElement("div",null,r.a.createElement("p",null,"Authentication failed! Don't give up, try logging in with a new username and password"),r.a.createElement("p",null,"Name"),r.a.createElement("textarea",{id:"name",rows:"1",defaultValue:ee}),r.a.createElement("p",null,"Password"),r.a.createElement("textarea",{id:"password",rows:"1",defaultValue:te}),r.a.createElement("button",{onClick:function(){var e=document.getElementById("name").value,t=document.getElementById("password").value;window.location.pathname="/user/"+e+"-"+t}},"Log in"))}var ne="lobby"===n?"unreset":"reset",ae=g?r.a.createElement("button",{onClick:function(){return fetch("/server/"+ne)}},ne):null;return r.a.createElement(u.a,{className:"justify-content-md-center"},r.a.createElement("h3",null,N.hypertext),ae,"Mode ",n,", Kicked: ",M.map((function(e){return e+", "})),K)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(17);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css",integrity:"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh",crossOrigin:"anonymous"}),r.a.createElement(i,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.e35d5283.chunk.js.map